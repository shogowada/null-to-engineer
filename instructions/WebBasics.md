# ウェブの仕組み

## ウェブって何？

ウェブ（Web、World Wide Web、WWW、W3）はインターネット上に公開されたウェブページ達を接続しているシステムのことだよ。

ここではどうやってそのシステムが作られているのか、そのシステムの部品を一つずつみながら学んで行こうね！

## ウェブサーバー

ウェブサーバーはウェブ上の色々なものを供給（サーブ）するものだよ！

「色々なもの」というのは、例えば HTML や CSS、JavaScript などから始まって、他にも画像とか動画とか、必要なもの全部だよ。

ウェブ上で手に入るものは、全てウェブサーバーから供給されているんだ！

## ウェブクライアント

ウェブクライアントはウェブサーバーに接続して、必要なものをダウンロードするもののことなんだ。

もしウェブサーバーが他のウェブサーバーから何かをダウンロードする場合、
そのウェブサーバーはウェブクライアントとしても機能していることになるね！

ウェブクライアントがウェブサーバーから何かをダウンロードするときは、HTTP（エイチ・ティー・ティー・ピー）リクエストというものを送るよ。
ウェブサーバーはそれに対して HTTP リスポンス（返事）を送り返すことで、ダウンロードが完了するんだ。
何やら HTTP って難しい単語が出てきたね！HTTP に関しては後でもうちょっと詳しく説明するから、今はあまり深く考えなくてもいいよ。

## ウェブブラウザ

ウェブブラウザはウェブクライアントの一種で、ダウンロードしたものを表示するものだよ。
例えば Chrome や Firefox、Safari や Edge は全部ウェブブラウザなんだ。

ウェブブラウザはウェブサーバーから HTML などをダウンロードして、
ダウンロードしたものを表示したり実行したりするよ。

## IP アドレス

ウェブクライアントがウェブサーバーに HTTP リクエストを送るときに、まずウェブサーバーの場所を分かってなきゃいけないよね。
その場所を記したのが [IP アドレス](https://ja.wikipedia.org/wiki/IPアドレス)と呼ばれるものなんだ。「アドレス」は日本語で「住所」だよ。

現在 IP アドレスには大きく分けて２種類あって、１つは IPv4、もう１つは IPv6 と呼ばれているよ。

IPv4 のアドレスは`192.0.2.1`のような感じで、IPv6 のアドレスは`2001:db8:0:1234:0:567:8:1`のような感じだよ。IPv6 の方が長いね！

実は少し前までは IPv4 までしかなかったんだけど、それじゃ IP アドレスが足りなくなるかもしれないってことで IPv6 も新しく作られたんだ。
ウェブサーバーによっては IPv4 も IPv6 も両方持っていることもあるけど、まだまだ IPv4 の方を多くみるかもしれないね。

## DNS

IP アドレスでウェブサーバーの場所はわかるんだけど、IP アドレスって人間には覚えにくいよね。

[DNS（ディー・エヌ・エス、Domain Name Servers）](https://ja.wikipedia.org/wiki/Domain_Name_System)はドメインネームと呼ばれるものを IP アドレスに変換してくれるものだよ。

ドメインネームは google.com とか yahoo.com とかのこと。DNS のおかげで Google や Yahoo の IP アドレスを覚えなくても、ドメインネームを知っているだけで Google や Yahoo のウェブサーバーに HTTP リクエストを送ることができるんだね。

## URL

[URL](https://ja.wikipedia.org/wiki/Uniform_Resource_Locator)（ユー・アール・エル、Uniform Resource Locator）はウェブサーバーの場所だけじゃなくて、
そのウェブサーバーのどこに HTTP リクエストを送るかを記述したものだよ。

URL 自体は HTTP リクエスト以外にも使われるんだけど、ここでは HTTP リクエストに絞って説明するね。

URL は https://www.google.com/search?q=programming のような見た目をしているよ。

最初の`https`の部分はスキームと呼ばれていて、HTTP（暗号化なし）で接続するか、HTTPS（暗号化あり）で接続するかの定義をしているよ。

次の`www.google.com`の部分は[ホスト名](https://ja.wikipedia.org/wiki/ホスト名)。ここでは`www`というローカルホスト名に`google.com`というドメイン名がついているね。これ全部で１つのホスト名になるよ。

次はポート番号を記述することになるんだけど、`http`や`https`のスキームにはデフォルトのポート番号が振り当てられていて、それぞれ`80`と`443`だから、記述されていない場合はデフォルトのポート番号を使うことになるよ。
もし記述したい場合は https://www.google.com:443/search?q=programming のように、`:`を使ってホスト名の後につけてね。

次の`/search`の部分はパスと呼ばれていて、そのウェブサーバーのどこに HTTP リクエストを送るかを記述しているんだ。

次の`?q=programming`の部分はクエリ文字列と呼ばれていて、ウェブサーバーに渡すことができる追加の情報だよ。
ここでは`q=programming`という情報を渡しているね。Google はこの情報があるから「`programming`って検索すればいいんだな」って分かるんだ。

クエリ文字列は他にもクエリストリングやクエリパラメータと呼ばれることもあるよ。

## HTTP

[HTTP（エイチ・ティー・ティー・ピー、Hypertext Transfer Protocol）](https://ja.wikipedia.org/wiki/Hypertext_Transfer_Protocol)はウェブで使う通信プロトコルだよ。
プロトコルっていうのは通信するときに「こういうデータ送ったらこういう意味だからね」っていう決まり事の集まりなんだ。
ウェブサーバーとウェブクライアントがみんな HTTP で通信することによって、お互いに何を言っているのか分かるようになっているんだね。

リクエスト
URL + メソッド + ヘッダ + ボディ

リスポンス
リクエスト + ステータス
